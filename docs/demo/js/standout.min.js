/*!-----------------------------------------------------------------------------
 * A jQuery plugin that creates events when a certain DOM element is in a position relative to a selected portion of the viewport.
 * v3.0.0 - built 2021-04-29
 * Licensed under the MIT License.
 * https://github.com/DonnieRich/standoutjs
 * ----------------------------------------------------------------------------
 * Copyright (C) 2020-2021 Donato Pasquale Riccio
 * https://designaddicted.eu/
 * --------------------------------------------------------------------------*/
!function(t,e,o,i){"use strict";const n="standout";let s=!1;const r=[],p={onlyFirstTime:!1,oncePerEvent:!0,showDemoLayout:!1,lightBoxEffect:!1,backgroundColor:"#000000",top:.3,bottom:.3,overlay:{backgroundColor:"#000000",opacity:"0",width:"100%",height:"100vh",position:"fixed",top:"0",left:"0",zIndex:"9999",display:"none"},overlayId:"overlayStandout",enabled:!0,window:e,body:"body"},l={onlyFirstTime:!1,oncePerEvent:!1},h={initialized:!1,originalTop:0,originalLeft:0,elementWidth:0,elementHeight:0,elementTop:0,elementCenter:0,elementBottom:0,elementTopPosition:0,elementCenterPosition:0,elementBottomPosition:0,viewportHeight:0,viewportTop:0,viewportBottom:0,lastViewportTop:0,lastEvent:"",currentEvent:"",eventsQueue:[],maxEventsInQueue:7},m={demoLayoutTop:{backgroundColor:"#000000",opacity:"0.75",width:"100%",position:"fixed",top:"0",left:"0",zIndex:"9999"},demoLayoutCenter:{backgroundColor:"#000000",opacity:"0.75",width:"100%",position:"fixed",left:"0",zIndex:"9999",height:"5px",transform:"translateY(-50%)"},demoLayoutBottom:{backgroundColor:"#000000",opacity:"0.75",width:"100%",position:"fixed",top:"0",left:"0",zIndex:"9999"}};function Standout(t,e,o,i){this._name=n,this.i=e,this.idx=`standout_${this.i}`,this.clonedId=`${this.idx}_cloned`,this.isLastElement=i,this.options=this._getOptions(o),this.element=t,this.enabled=this.options.enabled,r[e]=this,this._init()}t.extend(Standout.prototype,{_init(){this._buildCache(),this._initViewport(),this._initObj(),this._bindEvents(),this.options.showDemoLayout&&!s&&(s=!0,this._setDemoLayout(this.options)),this.options.lightBoxEffect&&(0===t(`#${this.options.overlayId}`).length&&this._setOverlayLayout(this.options),0===t(`.${this.clonedId}`).length&&this._duplicateElement(this.element,this.clonedId),this.options.compatibility&&this.isLastElement&&"function"==typeof this.options.dynamicContentListeners&&this.options._dynamicContentListeners(),this._registerLightboxEvents())},_buildCache(){this.$element=this._getElement(this.i)},_bindEvents(){const e=this;t(e.options.window).on("resize scroll",(function(){e._updateObj(),e._isInViewport()?(e._setCurrentEvent(),(!e.options.oncePerEvent||e.options.onlyFirstTime&&e.options.oncePerEvent&&!e._checkIfEventAlreadyTriggered()||e.options.oncePerEvent&&!e.options.onlyFirstTime&&!e._checkIfLastEvent())&&e.$element.trigger(e.$element.objProps.currentEvent,[e]),e._setLastEvent(),e._addEventToQueue()):e._resetEvents()}))},_isInViewport(){return this.$element.objProps.elementBottom>this.$element.objProps.extremeTop&&this.$element.objProps.elementTop<this.$element.objProps.extremeBottom&&this.$element.objProps.initialized},_setCurrentEvent(){const t=this.$element.objProps;let e="U";0===t.lastViewportTop&&(t.lastViewportTop=t.viewportTop),t.elementCenterPosition>=t.viewportTopLimit&&t.elementCenterPosition<=t.viewportBottomLimit?e="C":t.elementBottomPosition<=t.viewportTopLimit?e="O":t.elementBottomPosition>t.viewportTopLimit&&t.elementCenterPosition<t.viewportTopLimit?e=t.viewportTop<t.lastViewportTop?"ET":"EXT":t.elementTopPosition<t.viewportBottomLimit&&t.elementCenterPosition>t.viewportBottomLimit&&(e=t.viewportTop>t.lastViewportTop?"EB":"EXB"),t.lastViewportTop=t.viewportTop,t.currentEvent=e},_getCurrentEvent(){return this.$element.objProps.currentEvent},_setLastEvent(){this.$element.objProps.lastEvent=this.$element.objProps.currentEvent},_getLastEvent(){return this.$element.objProps.lastEvent},_getViewportBottomLimit(){return this.$element.objProps.viewportBottomLimit},_getViewportTopLimit(){return this.$element.objProps.viewportTopLimit},_getElementCenterPosition(){return this.$element.objProps.elementCenterPosition},_getElementHeight(){return this.$element.objProps.elementHeight},_checkIfLastEvent(){return this._getLastEvent()===this._getCurrentEvent()},_checkIfEventAlreadyTriggered(){return this.$element.objProps.eventsQueue.includes(this._getCurrentEvent())},_addEventToQueue(){this._checkIfEventAlreadyTriggered()||this.$element.objProps.eventsQueue.push(this._getCurrentEvent())},_resetEvents(){this.$element.objProps.lastEvent="",this.$element.objProps.currentEvent=""},_initViewport(){const e=this._isWindow(),o=e?0:t(this.options.window).offset().top;this._updateViewport(o),this.$element.objProps.viewportHeight=t(this.options.window).height(),this.$element.objProps.viewportWidth=t(this.options.window).width(),this.$element.objProps.viewportBottom=this.$element.objProps.viewportTop+this.$element.objProps.viewportHeight,this.$element.objProps.viewportLeft=e?0:t(this.options.window).offset().left,this.$element.objProps.centerLimit=this.$element.objProps.viewportHeight*this.options.top+o+this.$element.objProps.viewportHeight*(1-(this.options.top+this.options.bottom))*.5,this.$element.objProps.distanceTop=this.$element.objProps.centerLimit-this.$element.objProps.viewportHeight*(1-(this.options.top+this.options.bottom))*.5,this.$element.objProps.distanceBottom=this.$element.objProps.centerLimit+this.$element.objProps.viewportHeight*(1-(this.options.top+this.options.bottom))*.5,this.$element.objProps.extremeTop=this.$element.objProps.distanceTop-this.$element.objProps.viewportHeight*this.options.top,this.$element.objProps.extremeBottom=this.$element.objProps.distanceBottom+this.$element.objProps.viewportHeight*this.options.bottom,this.$element.objProps.viewportTopLimit=this.$element.objProps.distanceTop,this.$element.objProps.viewportBottomLimit=this.$element.objProps.distanceBottom,this.$element.objProps.viewportCenterLimit=this.$element.objProps.centerLimit,console.log("INIT VIEWPORT METHOD - THIS LOG SHOULD SHOW UP ONLY ONE TIME")},_updateViewport(e){this.$element.objProps.viewportTop=t(this.options.window).scrollTop()},_isWindow(){return this.options.window===e},_initObj(){this.$element.objProps.originalTop=this.$element.offset().top,this.$element.objProps.originalLeft=this.$element.offset().left,this.$element.objProps.initialized=!0,console.log("INIT OBJ METHOD - THIS LOG SHOULD SHOW UP ONLY ONE TIME")},_updateObj(){const e=this.$element.objProps,o=this._isWindow()?0:t(this.options.window).offset().top;this._updateViewport(o),e.initialized=!0,e.display=this.$element.css("display"),e.elementWidth=this.$element.outerWidth(),e.elementHeight=this.$element.outerHeight(),e.elementTop=this.$element.offset().top,e.elementCenter=e.elementTop+e.elementHeight/2,e.elementBottom=e.elementTop+e.elementHeight,e.elementTopPosition=e.elementTop,e.elementCenterPosition=e.elementCenter,e.elementBottomPosition=e.elementBottom},_calculateOpacityValue(t){const e=this._getElementHeight()/2;return(e-Math.abs(t-this._getElementCenterPosition()))/e},_getCurrentElementOpacity(){let t=0;switch(this._getCurrentEvent()){case"C":t=1;break;case"EB":case"EXB":t=this._calculateOpacityValue(this._getViewportBottomLimit());break;case"ET":case"EXT":t=this._calculateOpacityValue(this._getViewportTopLimit())}return t.toFixed(2)},_getPrevNextElementOpacity(){let t=0,e=0,o=0;const i=this._getNextElement(this.i),n=this._getPrevElement(this.i);return t=this._getCurrentElementOpacity(),void 0!==i&&i.$element.hasOwnProperty("objProps")&&(e=i._getCurrentElementOpacity()),void 0!==n&&n.$element.hasOwnProperty("objProps")&&(o=n._getCurrentElementOpacity()),Math.max(t,e,o)},_registerLightboxEvents(){const t=this;t.$element.on("EB EXB ET EXT O  U C",(function(){return t._fading()}))},_fading(){const e=this.$element.objProps,o=this._getPrevNextElementOpacity(),i=o<=0?"none":"block",n=this._getCurrentElementOpacity()<=0?"none":e.display;t("#overlayStandout").css({display:i,opacity:o<.75?o:.75}),t(`.${this.clonedId}`).css({display:n,position:"absolute",top:e.originalTop,left:e.originalLeft,"z-index":"10000",width:e.elementWidth,height:e.elementHeight,margin:"0",opacity:this._getCurrentElementOpacity()<1?this._getCurrentElementOpacity():1})},_getOptions:e=>e.lightBoxEffect?t.extend({},p,e,l):t.extend({},p,e),_getElement(e){let o=!1;return void 0!==r[e]&&e>-1&&e<r.length&&(o=t(r[e].element),o.objProps=t.extend({},h)),o},_getNextElement:t=>r[t+1],_getPrevElement:t=>r[t-1],_setDemoLayout(e){const o=this.$element.objProps,i=this._isWindow()?0:t(this.options.window).offset().top;m.demoLayoutTop.top=o.viewportTop+i,m.demoLayoutBottom.top=o.viewportBottom+i-o.viewportHeight*e.bottom,m.demoLayoutTop.width=o.viewportWidth,m.demoLayoutCenter.width=o.viewportWidth,m.demoLayoutBottom.width=o.viewportWidth,m.demoLayoutTop.left=o.viewportLeft,m.demoLayoutCenter.left=o.viewportLeft,m.demoLayoutBottom.left=o.viewportLeft;let n=o.viewportHeight*e.top,s=t("<div />").css(m.demoLayoutTop).css("height",n).attr("id","demoLayoutTop");t(e.body).append(s);let r=m.demoLayoutTop.top+o.viewportHeight*e.top+(o.viewportHeight-(o.viewportHeight*e.top+o.viewportHeight*e.bottom))/2;s=t("<div />").css(m.demoLayoutCenter).css("top",r),t(e.body).append(s),n=o.viewportHeight*e.bottom,s=t("<div />").css(m.demoLayoutBottom).css("height",n).attr("id","demoLayoutBottom"),t(e.body).append(s)},_setOverlayLayout(e){const o=t("<div />").css(e.overlay).attr("id",e.overlayId);t(e.body).append(o)},_duplicateElement(e,o){t(e).clone(!0,!0).addClass(o).css("display","none").appendTo(opt.body)}}),t.fn.standout=function(e){if(undefined===e||"object"==typeof e){const o=this,i=o.length-1;return this.each((function(n){t.data(this,"plugin_standout")||t.data(this,"plugin_standout",new Standout(o[n],n,e,n===i))}))}"string"==typeof e&&"_"!==e[0]&&"init"!==e?"destroy"===e&&t.data(this,"plugin_standout",null):console.log("No public method available")}}(jQuery,window,document);
//# sourceMappingURL=standout.min.js.map
